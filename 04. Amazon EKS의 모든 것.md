# 무준단 운영부터 배포 자동화까지

## EKS의 운영에 어려운 점

- 클러스터 관리
  - 클러스터 전반에 보안 표준 및 모범 사례를 적용해 배포 자동화
- Add on 및 해당 의존성 설치
- 팀 관리
  - R&R을 어떻게 관리할지
- Configuration rhksfl
  - 수천개의 설정파일을 어떻게 관리할 지

## GitOps란?

- 원하는 상태를 선언적으로 표현 : 비즈니스 위험 감소

### 문제 해결 방법

- 클러스터 관리
  - EKS 블루프린트를 사용하길 권고한다
  - 아르고는 상당히 괜찮다.

---

## 환경변수 관리

- yml 파일이 수백 수천개 생겨나게 되는데 사람이 관리하기 어렵다.

---

# GS리테일

- GS25 편의점을 운영
- 컨테이너로 서비스를 변경하면서 수 많은 컨테이너를 관리하기 위해 쿠버네티스 적용

## EKS 클러스터 구성 전략

- 클러스터가 많아지면서 문제가 생겨났다.
  - 멀티 클러스터 관리 어려움 (신규기능 적용 어려움)
  - CI CD vkdlvmfkdls rhksfldml djfudna
  - 쿠버네티스 진입장벅 : 외주 기반이면 힘들다
  - 대규모 매니패스트 관리 어려움.
    매니패스트 : 쿠버네티스를 관리하는 파일

## EKS는 업그레이드 주기가 엄청 빠르다

- 평균 3개월마다 신규버전 릴리즈
- 릴리즈 된 버전은 최대 14개월 지원

## 일반적으로 EKS 업그레이드를 하려면?

- 클러스터와 Worker Node를 순차, 강제 업데이트
  - 서비스 중단 발생
  - 이슈 발생시 롤백이 안된다.
- Blue, Green 방식의 업그레이드
  - 안정적 업데이트 가능

---

# 배포방안(커스텀 배포 API)

- 빌드와 배포는 개발팀이 운영하는데 인프라 운영을 인프라가 관리
  - 책임 소재가 모호
- 인프라와 CI CD도구가 팀별로 다르고 복잡함.
- 쿠버네티스에 대한 이해가 필요함

## 해결 방안

- 배포 진입장벽 해소
  - 개발자는 개발에만 집중하고 애플리케이션에 대한 손쉬운 배포
- 빌드와 배포 분리
  - 간단하게 배포에 필요한 정보를 요청받고 템플릿 변환 엔진을 이용해 쿠버네티스 매ㅇ니패스트 yaml 생성
- Gitops
  - 아르고 cd 적용

## 커스텀 API

- api를 만들어서 필요한 파라미터를 보내면 배포가 되도록 만들어 해결
  - 개발자는 개발만
  - 쿠버네티스를 몰라도 쉬운 배포 가능하도록

## 템플릿 관리 도구

- Helm, Kustomize
  - 정적인 템플릿 설정 값을 동적으로 반영하여 k8s 리소스를 생성해주는 도구 필요
-
